<script type="text/javascript">
	RED.nodes.registerType('ncd-gateway-node',{
		category: 'NCD',
		color: '#a6bbcf',
		icon: "serial.png",
		paletteLabel: "Wireless Gateway",
		outputLabels: ["Parsed","Unknown"],
		defaults: {
			name: {value: ""},
			connection: {value: "", type: "ncd-gateway-config"},
			unknown_devices: {value:0},
			outputs:{value:1}
		},
		inputs: 1,
		outputs: 1,
		label: function() {
			return this.name || "Wireless Gateway";
		},
		oneditsave: function(){
			this.outputs = $("#node-input-unknown_devices").is(':checked') ? 2 : 1;
		},
		button: {
			enabled: function() {
				return true;
			},
			onclick: function() {
				if (this.changed) {
					return RED.notify(RED._("notification.warning", {message:RED._("notification.warnings.undeployedChanges")}),"warning");
				}
				var label = this.name;
				if (label.length > 30) {
					label = label.substring(0,50)+"...";
				}
				label = label.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");
				if (this.payloadType === "date") { label = this._("inject.timestamp"); }
				if (this.payloadType === "none") { label = this._("inject.blank"); }
				var node = this;
				$.ajax({
					url: "ncd/wireless/gateway/config/"+this.id,
					type:"POST",
					success: function(resp) {
						RED.notify(node._("Modem "+resp,{label:label}),"success");
					},
					error: function(jqXHR,textStatus,errorThrown) {
						RED.notify(node._("common.notification.error",{message:node._("common.notification.errors.not-deployed")}),"error");
					}
				});
			}
		},
	});
</script>
<script type="text/x-red" data-template-name="ncd-gateway-node">
	<div class="form-row">
		<label for="node-input-name"><i class="icon-tag"></i> Name</label>
		<input type="text" id="node-input-name" placeholder="Name">
	</div>
	<div class="form-row">
		<label for="node-input-connection"><i class="icon-tag"></i> Serial Device</label>
		<select id="node-input-connection"></select>
	</div>
	<div class="form-row">
		<label for="node-input-unknown_devices"><i class="icon-tag"></i> Output data from Unknown Devices</label>
		<input type="checkbox" id="node-input-unknown_devices" value="1">
	</div>
</script>

<style>
    .ncd-active-check strong{
        width: 100%;
    }
    .form-row.ncd-active-check{
        margin: 12px 0px;
        border: 1px solid #eee;
        padding: 12px;
        border-radius: 8px;
    }
    .form-row.ncd-active-check > div{
        padding: 4px;
    }
    .form-row.ncd-active-check > div > input[type='checkbox']{
        width: inherit;
    }
    .form-row .caption{
        font-size: .95em;
		padding-left: 1em;
		margin-top: .25em;
    }
</style>

<script type="text/x-red" data-help-name="ncd-gateway-node">
    <h3>Gateway Node</h3>
	<p>This node is primarily useful for debugging and configuring sensors. This node is equipped with a button on the flow that switches the modem between configuration and listening mode.</p>
	<h3>Output</h3>
	<p>Any time sensor data is received from any sensor on the network, this node will output a message containing all pertinant information as in the example below.</p>
  <h3>Input</h3>
  <p>The Input connection to this Gateway node allows for sending data to devices.  The input connection expects the payload to be an object containging an address and data variable.  Address is a string representation of the destination device.  Data is a byte array of data to be transmitted as payload to that device.  Example "payload":{"address":"00:13:A2:00:01:02:03:04",data:[254,108,1]}</p>
  <pre>
  msg = {
    topic: "sensor_data",
    payload: {
      nodeId: 0,
      firmware: 3,
      battery: 3.2940600000000004,
      counter: 37,
      sensor_type: 1,
      sensor_data: {
        humidity: 45.51,
        temperature: 23.91,
      },
      type: "sensor_data",
      addr: "00:13:a2:00:41:07:18:81",
      original: {
        mac: "00:13:a2:00:41:07:18:81",
        receive_options: {
          ack: 0,
          broadcast: 0,
          type: ""
        }
      },
      data: [127,0,3,3,255,37,0,1,0,17,199,9,87],
      type: "receive_packet"
    },
    _msgid: "391caba.5a19454"
  }
	</pre>
</script>


<script type="text/javascript">
	NCD_validators = {
		number_range: function(l, h, base, property_name = false){
			if(!base) base = 10;
			if(property_name === 'on_request_timeout_80'){
				return function(v){
					var int = parseInt(v, base);
					if(this.on_request_timeout_80 == 0){
						console.log('ERROR: Invalid property detect. Setting on_request_timeout_80 to default value');
						$("#node-input-on_request_timeout_80").val(1);
						return true;
					} else if(v == undefined){
						return true;
					}
					return int >= l && int <= h;
				}
			}
			if(base == 'decimal'){
				return function(v){
					var n = parseFloat(v);
					return n >= l && n <= h;
				}
			}else{
				return function(v){
					var int = parseInt(v, base);
					// Added to remove new settings from interfering with old nodes
					if(v == undefined){
						return true;
					}
					return int >= l && int <= h;
				}
			}
		}
	}
	RED.nodes.registerType('ncd-wireless-node',{
		category: 'NCD',
		color: '#a6bbcf',
		icon: "serial.png",
		paletteLabel: "Wireless Device",
		defaults: {
			name: {value: ""},
			connection: {value: "", type: "ncd-gateway-config"},
			config_comm: {value: "", type: "ncd-gateway-config", required: false},
			addr: {value: ""},
			sensor_type: {value: ""},
			auto_config: {value: ""},
			on_the_fly_enable: {value: ""},

			node_id_delay_active: {value: ""},
			node_id: {value: 0, validate: NCD_validators.number_range(0, 255)},//0 - 255

			delay: {value: 300, validate: NCD_validators.number_range(0, 16777215)},//1 - 16777215

			form_network: {value: ""},

			destination_active: {value: ""},
			destination: {value: '0000FFFF', validate: NCD_validators.number_range(0, 0xFFFFFFFF, 16)},//(0 - 0xFFFFFFFF)

			power_active: {value: ""},
			power: {value: 4},//(0 - 4)

			retries_active: {value: ""},
			retries: {value: 10, validate: NCD_validators.number_range(0, 16)},//(0 - 16)

			pan_id_active: {value: ""},
			pan_id: {value: '7FFF', validate: NCD_validators.number_range(0, 0x7FFF, 16)},//(0 - 0x7FFF)

			change_enabled: {value: ""},
			change_pr: {value: "0", validate: NCD_validators.number_range(0, 255)},
			change_interval: {value: "0", validate: NCD_validators.number_range(0, 16712198)},

			cm_calibration: {value: "60.6", validate: NCD_validators.number_range(0, 655.35, 'decimal')},

			bp_altitude: {value: "0", validate: NCD_validators.number_range(0, 65535)},
			bp_pressure: {value: "0", validate: NCD_validators.number_range(0, 14000)},

			bp_temp_prec: {value: "0"},
			bp_press_prec: {value: "0"},

			amgt_accel: {value: "0"},
			amgt_mag: {value: "0"},
			amgt_gyro: {value: "0"},

			impact_accel: {value: "0"},
			impact_data_rate: {value: "4"},
			impact_threshold: {value: 25, validate: NCD_validators.number_range(1, 127)},
			impact_duration: {value: 1, validate: NCD_validators.number_range(1, 127)},

			activ_interr_x: {value: 1, validate: RED.validators.number()},
			activ_interr_y: {value: 2, validate: RED.validators.number()},
			activ_interr_z: {value: 4, validate: RED.validators.number()},
			activ_interr_op: {value: 8, validate: RED.validators.number()},

			force_calibration_co2_auto_config: {value: ""},
			force_calibration_co2: {value: 400, validate: NCD_validators.number_range(400, 2000)},

			filtering: {value: 0, validate: RED.validators.number()},
			data_rate: {value: 5, validate: RED.validators.number()},
			time_series: {value: 0, validate: RED.validators.number()},
			reading_type: {value: 1, validate: RED.validators.number()},

			mode_80_active: {value: ""},
			mode_80: {value: 0},

			measurement_mode_80_active: {value: ""},
			measurement_mode_80: {value: 0},

			on_request_timeout_80_active: {value: ""},
			on_request_timeout_80: {value: 1, validate: NCD_validators.number_range(1, 10, 10, 'on_request_timeout_80')},

			sensor_boot_time_420ma_active: {value: ""},
			sensor_boot_time_420ma: {value: 0, validate: NCD_validators.number_range(0, 255)},

			deadband_80_active: {value: ""},
			deadband_80: {value: 0, validate: NCD_validators.number_range(0, 255)},

			filter_80_active: {value: ""},
			filter_80: {value: 0},

			output_data_rate_p1_81_active: {value: ""},
			output_data_rate_p1_81: {value: 0},
			output_data_rate_p2_81_active: {value: ""},
			output_data_rate_p2_81: {value: 0},

			sampling_duration_p1_81_active: {value: ""},
			sampling_duration_p1_81: {value: 0},
			sampling_duration_p2_81_active: {value: ""},
			sampling_duration_p2_81: {value: 0},

			led_alert_mode_84_active: {value: ""},
			led_alert_mode_84: {value: 0},

			led_accelerometer_threshold_84_active: {value: ""},
			led_accelerometer_threshold_84: {},

			led_velocity_threshold_84_active: {value: ""},
			led_velocity_threshold_84: {},

			acceleration_interrupt_threshold_84_active: {value: ""},
			acceleration_interrupt_threshold_84: {},

			set_rtc_101:{value:0},

			current_calibration_82:{Value:0},
			current_calibration_82_active:{Value:""},

			current_calibration_c1_80:{value:178, validate: NCD_validators.number_range(0, 655)},
			current_calibration_c1_80_active:{value:""},
			current_calibration_c2_80:{value:178, validate: NCD_validators.number_range(0, 655)},
			current_calibration_c2_80_active:{value:""},
			current_calibration_c3_80:{value:178, validate: NCD_validators.number_range(0, 655)},
			current_calibration_c3_80_active:{value:""},
			current_calibration_c2_82:{Value:0, validate: NCD_validators.number_range(0, 655)},
			current_calibration_c2_82_active:{Value:""},

			current_calibration_c3_82:{Value:0, validate: NCD_validators.number_range(0, 655)},
			current_calibration_c3_82_active:{Value:""},

			output_data_rate_101_active: {value: ""},
			output_data_rate_101: {value: 0},
			output_data_rate_101_m2_active: {value: ""},
			output_data_rate_101_m2: {value: 0},
			sampling_duration_101_active: {value: ""},
			sampling_duration_101: {value: 1, validate: NCD_validators.number_range(1, 255)},
			sampling_interval_101_active: {value: ""},
			sampling_interval_101: {value: 1},
			full_scale_range_101_active: {value: ""},
			full_scale_range_101: {value: 1},
			full_scale_range_101_m2_active: {value: ""},
			full_scale_range_101_m2: {value: 1},
			x_axis_101: {value: ""},
			y_axis_101: {value: ""},
			z_axis_101: {value: ""},

			low_pass_filter_80_active: {value:""},
			low_pass_filter_80: {value:0},
			high_pass_filter_80_active: {value:""},
			high_pass_filter_80: {value:0},

			low_pass_filter_81_p2_active: {value:""},
			low_pass_filter_81_p2: {value:0},
			high_pass_filter_81_p2_active: {value:""},
			high_pass_filter_81_p2: {value:0},

			roll_angle_threshold_47:{value:0, validate: NCD_validators.number_range(0, 255)},
			roll_angle_threshold_47_active:{value:""},
			pitch_angle_threshold_47:{value:0, validate: NCD_validators.number_range(0, 255)},
			pitch_angle_threshold_47_active:{value:""},

			counter_threshold_35:{value:50, validate: NCD_validators.number_range(0, 65534)},
			counter_threshold_35_active:{value:""},

			payload_length_80_active:{value:""},
			payload_length_80:{value:3, validate: NCD_validators.number_range(0, 3)},
		},
		inputs: 0,
		outputs: 1,
		label: function() {
			if(this.name) return this.name;
			if(this.addr) return this.addr.split(":").slice(4).join(':');
			if(this.sensor_type){
				var types = {
					"1": "Temperature/Humidity",
					"2": "2ch Push Notification/Voltage Detection",
					"3": "ADC/4-20 mA/DC Voltage",
					"4": "Thermocouple",
					"5": "Gyro/Magneto/Temperature",
					"6": "Temperature/Barometeric Pressure",
					"7": "Impact Detection",
					"8": "Vibration",
					"9": "Proximity and Light",
					"10": "Light",
					"12": "3 Channel Thermocouple",
					"13": "Current Monitor",
					"14": "1 Channel 4-20mA Receiver",
					"15": "1 Channel 0-10V Receiver",
					"16": "1 Channel Soil Moisture Sensor",
					"17": "1 Channel AC Voltage Sensor",
					"18": "Pulse Frequency",
					"19": "2 Channel Current Sensor",
					"20": "High Precision Pressure Sensor",
					"21": "Differential Bi directional Pressure Sensor",
					"22": "0-24V AC/DC Optically Isolated Inputs",
					"23": "2 Channel Thermocouple Sensor",
					"24": "Activity Detection",
					"25": "Asset Monitor",
					"26": "Pressure Sensor",
					"27": "Environmental Sensor",
					"28": "3 Channel Current Sensor",
					"29": "Linear Displacement Sensor",
					"30": "Structural Monitoring Sensor",
					"31": "Air Quality TVOC eCO2 Temperature and Humidity Sensor",
					"32": "Particulate Matter Sensor",
					"33": "AC Current Detect Sensor",
					"34": "Tank Level Sensor",
					"35": "1 Channel Counter",
					"36": "2 Channel Counter",
					"37": "7 Channel Push Notification",
					"39": "3 Wire RTD Temperature Sensor",
					"40": "Enterprise Vibration Sensor",
					"41": "RPM Proximity Sensor",
					"42": "0-24VDC Voltage Monitor",
					"43": "Dual Temperature Humidity Current Detection Sensor",
					"44": "CO2 Gas Sensor",
					"45": "4-20mA 16-Bit Input Transmitter",
					"46": "Motion Detection Sensor",
					"47": "Wireless Tilt Sensor",
					"48": "4-20mA 16-Bit Input Transmitter",
					"49": "6 Channel Thermocouple Sensor",
					"50": "Predictive Maintenance Sensor",
					"51": "6 Channel Current Sensor",
					"52": "2 Channel 4-20mA Receiver",
					"53": "Air Quality CO2 and PM Sensor",
					"54": "3 Channel RTD",
					"56": "2 Channel 0-10VDC Receiver",
					"60": "Air Velocity, Pressure, & Temperature Sensor",
					"61": "pH Temperature Sensor",
					"62": "ORP Temperature Sensor",
					"63": "pH and ORPTemperature Sensor",
					"64": "EC Salinity TDS and Temperature Sensor",
					"65": "DO and Temperature Sensor",
					"66": "DO EC Salinity TDS and Temperature Sensor",
					"67": "PAR Sensor",
					"69": "Soil Moisture Temperature and EC Sensor",
//					"70": "2 Channel Soil Moisture Temperature and EC Sensor",
					"71": "3 Channel Soil Moisture Temperature and EC Sensor",
					"72": "SDI Soil Moisture Temperature Moisture Probe",
					"75": "Siemens Air Velocity Probe",
					"76": "Wireless CO Gas Sensor",
					"77": "3 Channel SDI Soil Moisture Temperature Moisture Probe",
					"79": "Oil Analysis Sensor",
					"80": "One Channel Vibration Plus",
					"81": "Two Channel Vibration Plus",
					"82": "Condition Based/Predictive Maintenance Sensor",
					"84": "Type 84 - Standalone Smart Vibration Sensor",
					"101": "Pro Vibration",
					"102": "Strain Gauge",
					"200": "4-20mA Pass Through",
					"202": "Weather Station",
					"502": "C_50-27",
					"505": "Custom_SAP_Current_1C",
					"506": "Custom_SAP_Current_3C",
					"507": "Custom_SAP_Current_7C",
					"510": "GreenLight",
					"515": "Custom_SAP_Current_48C",
					"519": "Type 519: Custom Vibration 1",
					"520": "Type 520: Custom 6 Channel Current Temperature & Humidity",
					"10000": "4-Channel Relay",
					"10006": "4-Channel 4-20 mA Input",
					"10007": "4-Channel Current Monitor",
					"10012": "2-Relay + 2-Input",
				}
				return types[this.sensor_type];
			}
			return 'Wireless Device';
		},
		oneditprepare: function() {
			var that = this;
			try {
				$("#node-config-input-addr").autocomplete( "destroy" );
			} catch(err) {}
			$('.ncd-dependent[sensor_type]').hide();
			// loops through all settings that need validation and sets default values
			// Solves library upgrades that add new properties
			for(let prop in this._def.defaults){
				if(typeof this._def.defaults[prop].validate == 'function'){
					if(this[prop] == undefined || this[prop] == ""){
						$('#node-input-'+prop).val(this._def.defaults[prop].value);
					}
				}
			}
			$('#node-input-connection').change(function(){
				$.getJSON('ncd/wireless/needs_input/'+$(this).val(),function(data) {
					if(data.is_raw){
						that.needs_input = 1;
					}
				});
			});
			$('#node-input-sensor_type').change(() => {
				var type = $('#node-input-sensor_type').val();
				$('.ncd-dependent').hide();
				$('.ncd-dependent[data-sensor-'+type+']').show();
				if(parseInt(type) >= 10000){
					var current = $('#node-input-auto_config').prop('checked');
					if(!current) $('#node-input-auto_config').click();
					$('#node-input-auto_config').data('_checked', current).closest('.form-row').hide();
					this.inputs = 1;
				}else{
					$("#node-input-auto_config").closest('.form-row').show();
					if (typeof $("#node-input-auto_config").data('_checked') !== 'undefined'){
						$('#node-input-auto_config').prop('checked', $("#node-input-auto_config").data('_checked')).click().removeData('_checked');
					}
				}
			});
			$("#node-lookup-sensors").click(function() {
				$("#node-lookup-sensors").addClass('disabled');
				var connection = RED.nodes.node($('#node-input-connection').val())
				$.getJSON('ncd/wireless/sensors/list/'+$('#node-input-connection').val(),function(data) {
					$("#node-lookup-sensors").removeClass('disabled');
					var macs = [];
					var sensors = {};
					$.each(data, function(i, sensor) {
						macs.push(sensor.mac);
						sensors[sensor.mac] = sensor;
					});
					$("#node-input-addr").autocomplete({
						source:macs,
						minLength:0,
						close: function( event, ui ) {
							$("#node-input-addr").autocomplete( "destroy" );
						},
						select: function(e, ui){
							$('#node-input-sensor_type option[value="'+sensors[ui.item.value].type+'"]').prop('selected', true);
							$('#node-input-sensor_type').change();
							$('#node-input-node_id').val(sensors[ui.item.value].nodeId);
						}
					}).autocomplete("search","");
				});
			});
			$('.section .section-control').each(function(){
				var handleClick = function(){
					$(this).closest('.section').find('input, select').not('.section-control').prop('disabled', !$(this).is(':checked'));
				}
				$(this).click(handleClick);
				handleClick.apply(this);
			});
			$('#config_sensor').click(function(){
				if($(this).prop('disabled')) return;
				$(this).prop('disabled', true).text('Configuring...');
				$('#config_response').empty();
				$.getJSON('ncd/wireless/sensors/configure/'+that.id,function(data) {

					var clean = true;
					for(var i in data){
						if(data[i] !== true){
							clean = false;
							$('#config_response').append('<div>Problem setting '+i+': '+data[i]);
						}
					}
					if(clean){
						$('#config_response').append('<div>All configurations successfully set</div>');;
					}
					$('#config_sensor').prop('disabled', false).text('Configure Now');
				});
			});
			$('.ncd-config-toggle').each(function(){
				var handleClick = function(){
					// if($(this).prop('checked') && $(this).data('target-id')) {
					//     $('#'+$(this).data('target-id')).prop('disabled', false);
					// }
					// else{
					//     $('#'+$(this).data('target-id')).prop('disabled', true);
					// }

					if($(this).prop('checked')){
						if($(this).data('target-id')){
							$('#'+$(this).data('target-id')).prop('disabled', false);
						}
						if($(this).data('target-class')){
							$('.'+$(this).data('target-class')).prop('disabled', false);
						}
					}
					else{
						if($(this).data('target-id')){
							$('#'+$(this).data('target-id')).prop('disabled', true);
						}
						if($(this).data('target-class')){
							$('.'+$(this).data('target-class')).prop('disabled', true);
						}
						// $('#'+$(this).data('target-id')).prop('disabled', true);
					}
				}
				$(this).click(handleClick);
				handleClick.apply(this);
			});
		},
	});
</script>
<script type="text/x-red" data-template-name="ncd-wireless-node">
	<div class="form-row">
		<label for="node-input-name"><i class="icon-tag"></i> Name</label>
		<input type="text" id="node-input-name" placeholder="Name">
	</div>
	<div class="form-row">
		<label for="node-input-connection"><i class="icon-tag"></i> Serial Device</label>
		<select id="node-input-connection"></select>
	</div>
	<div class="form-row">
		<label for="node-input-config_comm"><i class="icon-tag"></i> Serial Device for Config</label>
		<select id="node-input-config_comm"></select>
	</div>
	<div class="form-row">
		<label for="node-input-addr"><i class="fa fa-random"></i> Mac Address</label>
		<input type="text" id="node-input-addr" style="width:60%;" >
		<a id="node-lookup-sensors" class="btn"><i id="node-lookup-sensors-icon" class="fa fa-search"></i></a>
	</div>
	<div class="form-row">
		<label for="node-input-sensor_type"><i class="icon-tag"></i> Sensor Type</label>
		<select id="node-input-sensor_type">
			<option value="1">Temperature and Humidity</option>
			<option value="2">2ch Push Notification/Voltage Detection</option>
			<option value="3">ADC/4-20 mA/DC Voltage</option>
			<option value="4">Thermocouple</option>
			<option value="5">Accel, Gyro, Magneto and Temperature</option>
			<option value="6">Temperature and Barometeric Pressure</option>
			<option value="7">Impact Detection</option>
			<option value="8">Vibration</option>
			<option value="9">Proximity</option>
			<option value="10">Light</option>
			<option value="12">3-channel Thermocouple</option>
			<option value="13">Current Monitor</option>
			<option value="14">10-Bit 1-Channel 4-20mA</option>
			<option value="15">10-Bit 1-Channel ADC</option>
			<option value="16">Soil Moisture Sensor</option>
			<option value="17">24-Bit AC Voltage Monitor</option>
			<option value="18">Pulse/Frequency</option>
			<option value="19">2-channel 24-bit Current Monitor</option>
			<option value="20">Precision Pressure & Temperature (pA)</option>
			<option value="21">AMS Pressure & Temperature</option>
			<option value="22">0-24V AC/DC Optically Isolated Inputs</option>
			<option value="23">2-channel Thermocouple</option>
			<option value="24">Activity Detection</option>
			<option value="25">Asset Monitor</option>
			<option value="26">Pressure & Temperature (PSI)</option>
			<option value="27">Environmental</option>
			<option value="28">3-Channel Current Monitor</option>
			<option value="29">Linear Displacement Sensor</option>
			<option value="30">Structural Monitoring Sensor</option>
			<option value="31">Air Quality TVOC eCO2 Temperature and Humidity Sensor</option>
			<option value="32">Particulate Matter Sensor</option>
			<option value="33">AC Current Detect Sensor</option>
			<option value="34">Wireless Tank Level</option>
			<option value="35">One Channel Counter</option>
			<option value="36">Two Channel Counter</option>
			<option value="37">7 Channel Push Notification</option>
			<option value="39">RTD Temperature Sensor</option>
			<option value="40">Vibration w/Time Domain (partial support)</option>
			<option value="41">RPM Proximity Sensor</option>
			<option value="42">0-24VDC Voltage Monitor</option>
			<option value="43">Dual Temperature Humidity Current Detection Sensor</option>
			<option value="44">Wireless CO2 Gas Sensor</option>
			<option value="45">4-20mA 16-Bit Input Transmitter</option>
			<option value="46">Motion Detection Sensor</option>
			<option value="47">Type 47: Tilt Sensor</option>
			<option value="48">4-20mA 16-Bit Input Transmitter</option>
			<option value="49">6 Channel Thermocouple Sensor</option>
			<option value="50">Predictive Maintenance Sensor</option>
			<option value="51">6 Channel Current Sensor</option>
			<option value="52">2 Channel 4-20mA Receiver</option>
			<option value="53">Air Quality CO2 and PM Sensor</option>
			<option value="54">3 Channel RTD</option>
			<option value="56">2 Channel 0-10VDC Receiver</option>
			<option value="60">Air Velocity and Precision Pressure & Temperature Sensor</option>
			<option value="61">pH Temperature Sensor</option>
			<option value="62">ORP Temperature Sensor</option>
			<option value="63">pH and ORPTemperature Sensor</option>
			<option value="64">EC Salinity TDS and Temperature Sensor</option>
			<option value="65">DO and Temperature Sensor</option>
			<option value="66">DO EC Salinity TDS and Temperature Sensor</option>
			<option value="67">PAR Sensor</option>
			<option value="69">Soil Moisture Temperature and EC Sensor</option>
<!--
			<option value="70">2 Channel Soil Moisture Temperature and EC Sensor</option>
-->
			<option value="71">3 Channel Soil Moisture Temperature and EC Sensor</option>
			<option value="72">SDI-12 Wireless</option>
			<option value="75">Siemens Air Velocity Probe</option>
			<option value="76">Wireless CO Gas Sensor</option>
			<option value="77">3 Channel SDI Soil Moisture Temperature Moisture Probe</option>
			<option value="79">Oil Analysis Sensor</option>
			<option value="80">One Channel Vibration Plus</option>
			<option value="81">Two Channel Vibration Plus</option>
			<option value="82">Condition Based/Predictive Maintenance Sensor</option>
			<option value="84">Type 84 - Standalone Smart Vibration Sensor</option>
			<option value="101">Pro Vibration</option>
			<option value="102">Strain Gauge</option>
			<option value="200">4-20mA Pass Through</option>
			<option value="202">Weather Station</option>
			<option value="502">C_50-27</option>
			<option value="505">Custom_SAP_Current_1C</option>
			<option value="506">Custom_SAP_Current_3C</option>
			<option value="507">Custom_SAP_Current_7C</option>
			<option value="510">GreenLight</option>
			<option value="515">Custom_SAP_Current_48C</option>
			<option value="519">Type 519: Custom Vibration 1</option>
			<option value="520">Type 520: Custom 6 Channel Current Temperature & Humidity</option>
			<option value="10000">4-Channel Relay</option>
			<option value="10006">4-Channel 4-20 mA Input</option>
			<option value="10007">4-Channel Current Monitor</option>
			<option value="10012">2-Relay + 2-Input</option>
		</select>
	</div>
	<div class="section">
		<h3>Advanced</h3>
		<div>
			<div class="form-row">
				<label for="node-input-auto_config"><i class="icon-tag"></i> Auto Config</label>
				<input class="section-control" type="checkbox" id="node-input-auto_config" value="1">
			</div>
			<div class="form-row ncd-dependent" data-sensor-80 data-sensor-81 data-sensor-82 data-sensor-84 data-sensor-101 data-sensor-102 data-sensor-519 data-sensor-520>
				<hr>
				<label for="node-input-on_the_fly_enable"><i class="icon-tag"></i> OTF Config*</label>
				<input type="checkbox" id="node-input-on_the_fly_enable" value="1">
				<p class="caption">
					*OTF: On The Fly.<br>This option allows for configuring the sensor without entering configuration mode.<br>
					This option is in development and few configuration options are supported.
				</p>
				<hr>
			</div>
			<div class="form-row ncd-active-check">
				<strong>Wait for Network Formation</strong>
				<div>
					<label for="node-input-form_network"><i class="icon-tag"></i>Enable</label>
					<input type="checkbox" id="node-input-form_network" value="1">
				</div>
				<p class="caption">
					Enabling this adds commands to ensure the mesh network is <br>fully formed before sending configuration<br>
					This will increase the reliability of confiugration commands but slow down configuration
				</p>
			</div>
			<div class="form-row ncd-active-check">
				<strong>Destination Address</strong>
				<div>
					<label for="node-input-destination_active">Active:</label>
					<input type="checkbox" id="node-input-destination_active" class="ncd-config-toggle" data-target-class="node-input-destination" value="1">
				</div>
				<div>
					<label for="node-input-destination"><i class="icon-tag"></i>Address:</label>
					<input type="text" id="node-input-destination" value="0000FFFF">
				</div>
				<p class="caption">
					Default value: 0000FFFF for Broadcast Mode<br>
					Example of targeted address: 41D5EC37
				</p>
			</div>
			<div class="form-row ncd-active-check">
				<strong>Network ID</strong>
				<div>
					<label for="node-input-pan_id_active">Active:</label>
					<input type="checkbox" id="node-input-pan_id_active" class="ncd-config-toggle" data-target-class="node-input-pan_id" value="1">
				</div>
				<div>
					<label for="node-input-pan_id"><i class="icon-tag"></i>Network ID:</label>
					<input type="text" id="node-input-pan_id" value="7FFF">
				</div>
				<p class="caption">
					Network ID Valid Range: 0-0x7FFF. Automatic sensor reboot<br><br>
					<strong>WARNING</strong>: Setting this to active while your sensor supports OTF will put sensors into a reboot cycle.<br>
					Once all of the sensors have had their Network ID updated you must disable this configuration.
				</p>
			</div>
			<div class="form-row ncd-active-check">
				<strong>Node ID and Delay</strong>
				<div>
					<label for="node-input-node_id_delay_active">Active:</label>
					<input type="checkbox" id="node-input-node_id_delay_active" class="ncd-config-toggle" data-target-class="node-input-node_id_delay" value="1">
				</div>
				<div>
					<label for="node-input-node_id"><i class="icon-tag"></i>Node ID:</label>
					<input type="text" id="node-input-node_id" class="node-input-node_id_delay">
				</div>
				<div>
					<label for="node-input-delay"><i class="icon-tag"></i>Delay:</label>
					<input type="text" id="node-input-delay" class="node-input-node_id_delay">
				</div>
			</div>
			<div class="form-row ncd-active-check">
				<strong>Power</strong>
				<div>
					<label for="node-input-power_active">Active:</label>
					<input type="checkbox" id="node-input-power_active" class="ncd-config-toggle" data-target-id="node-input-power" value="1">
				</div>
				<div>
					<label for="node-input-power"><i class="icon-tag"></i>Value:</label>
					<select id="node-input-power">
						<option value="0">+7 dBm (5 mW)</option>
						<option value="1">+15 dBm (32 mW)</option>
						<option value="2">+18 dBm (63 mW)</option>
						<option value="3">+21 dBm (125 mW)</option>
						<option selected="selected" value="4">+24 dBm (250 mW)</option>
					</select>
				</div>
			</div>
			<div class="form-row ncd-active-check">
				<strong>Retries</strong>
				<div>
					<label for="node-input-retries_active">Active:</label>
					<input type="checkbox" id="node-input-retries_active" class="ncd-config-toggle" data-target-id="node-input-retries" value="1">
				</div>
				<div>
					<label for="node-input-retries"><i class="icon-tag"></i>Value:</label>
					<input type="text" id="node-input-retries">
				</div>
			</div>
			<div class="ncd-dependent" data-sensor-13 data-sensor-10 data-sensor-3>
				<div class="form-row">
					<label for="node-input-change_enabled"><i class="icon-tag"></i> Enable Percentage Change Detection</label>
					<input type="checkbox" id="node-input-change_enabled" value="1">
				</div>
				<div class="form-row">
					<label for="node-input-change_pr"><i class="icon-tag"></i> Percentage Change Threshold (0-255)</label>
					<input type="text" id="node-input-change_pr">
				</div>
				<div class="form-row">
					<label for="node-input-change_interval"><i class="icon-tag"></i> Percentage Change Interval (seconds)</label>
					<input type="text" id="node-input-change_interval">
				</div>
			</div>
			<!-- Current Monitor Options -->
			<div class="ncd-dependent" data-sensor-13>
				<div class="form-row">
					<label for="node-input-cm_calibration"><i class="icon-tag"></i> Calibration Option (0 - 655.35)</label>
					<input type="text" id="node-input-cm_calibration">
				</div>
			</div>
			<!-- Barometric Pressure Options -->
			<div class="ncd-dependent" data-sensor-6>
				<div class="form-row">
					<label for="node-input-bp_altitude"><i class="icon-tag"></i> Baseline Altitude (0 - 65535 meters)</label>
					<input type="text" id="node-input-bp_altitude">
				</div>
				<div class="form-row">
					<label for="node-input-bp_pressure"><i class="icon-tag"></i> Baseline Pressure (0 - 14000 mbar)</label>
					<input type="text" id="node-input-bp_pressure">
				</div>
				<div class="form-row">
					<label for="node-input-bp_temp_prec"><i class="icon-tag"></i> Temperature Precision</label>
					<select id="node-input-bp_temp_prec">
						<option selected="selected" value="0">0.012</option>
						<option value="2">0.008</option>
						<option value="4">0.005</option>
						<option value="6">0.003</option>
						<option value="8">0.002</option>
					</select>
				</div>
				<div class="form-row">
					<label for="node-input-bp_press_prec"><i class="icon-tag"></i> Pressure Precision</label>
					<select id="node-input-bp_press_prec">
						<option selected="selected" value="0">0.065</option>
						<option value="2">0.042</option>
						<option value="4">0.027</option>
						<option value="6">0.018</option>
						<option value="8">0.012</option>
					</select>
				</div>
			</div>
			<!-- Magneto/Gyro/Accel/Temp Options -->
			<div class="ncd-dependent" data-sensor-5>
				<div class="form-row">
					<label for="node-input-amgt_accel"><i class="icon-tag"></i> Acceleration Range</label>
					<select id="node-input-amgt_accel">
						<option selected="selected" value="0">±2g</option>
						<option value="1">±4g</option>
						<option value="3">±8g</option>
						<option value="4">±16g</option>
					</select>
				</div>
				<div class="form-row">
					<label for="node-input-amgt_mag"><i class="icon-tag"></i> Magnetometer Gain</label>
					<select id="node-input-amgt_mag">
						<option selected="selected" value="0">±4 gauss</option>
						<option value="1">±8 gauss</option>
						<option value="2">±12 gauss</option>
						<option value="3">±16 gauss</option>
					</select>
				</div>
				<div class="form-row">
					<label for="node-input-amgt_gyro"><i class="icon-tag"></i> Gyroscope Scale</label>
					<select id="node-input-amgt_gyro">
						<option selected="selected" value="0">±245dps</option>
						<option value="1">±500dps</option>
						<option value="2">±2000dps</option>
					</select>
				</div>
			</div>
			<div class="ncd-dependent" data-sensor-7 data-sensor-24>
				<div class="form-row">
					<label for="node-input-impact_accel"><i class="icon-tag"></i> Acceleration Range</label>
					<select id="node-input-impact_accel">
						<option selected="selected" value="0">±2g</option>
						<option value="1">±4g</option>
						<option value="3">±8g</option>
						<option value="4">±16g</option>
					</select>
				</div>
				<div class="form-row">
					<label for="node-input-impact_data_rate"><i class="icon-tag"></i> Data Rate</label>
					<select id="node-input-impact_data_rate">
						<option selected="selected" value="0">Power Down</option>
						<option value="1">1</option>
						<option value="2">10</option>
						<option value="3">25</option>
						<option value="4">50</option>
						<option value="5">100</option>
						<option value="6">200</option>
						<option value="7">400</option>
						<option value="8">1600</option>
						<option value="9">5376</option>
					</select>
				</div>
				<div class="form-row">
					<label for="node-input-impact_threshold"><i class="icon-tag"></i> Threshold (1 - 127)</label>
					<input id="node-input-impact_threshold">
				</div>
				<div class="form-row">
					<label for="node-input-impact_duration"><i class="icon-tag"></i> Duration (1 - 127)</label>
					<input id="node-input-impact_duration">
				</div>
			</div>
			<div class="ncd-dependent" data-sensor-24>
			//activ_interr_x
				<div class="form-row">
					<label for="node-input-activ_interr_x"><i class="icon-tag"></i> Interrupt X-Axis</label>
					<select id="node-input-activ_interr_x">
						<option value="1">High</option>
						<option value="0">Low</option>
					</select>
				</div>
				<div class="form-row">
					<label for="node-input-activ_interr_y"><i class="icon-tag"></i> Interrupt Y-Axis</label>
					<select id="node-input-activ_interr_y">
						<option value="2">High</option>
						<option value="0">Low</option>
					</select>
				</div>
				<div class="form-row">
					<label for="node-input-activ_interr_z"><i class="icon-tag"></i> Interrupt Z-Axis</label>
					<select id="node-input-activ_interr_z">
						<option value="4">High</option>
						<option value="0">Low</option>
					</select>
				</div>
				<div class="form-row">
					<label for="node-input-activ_interr_op"><i class="icon-tag"></i> Interrupt Logic</label>
					<select id="node-input-activ_interr_op">
						<option value="8">And</option>
						<option value="0">Or</option>
					</select>
				</div>
			</div>
            <div class="ncd-dependent" data-sensor-40>
				<div class="form-row">
					<label for="node-input-filtering"><i class="icon-tag"></i> Data Filtering</label>
					<select id="node-input-filtering">
						<option value="1">Enable</option>
						<option value="0">Disable</option>
					</select>
				</div>
				<div class="form-row">
					<label for="node-input-data_rate"><i class="icon-tag"></i> Data Rate</label>
					<select id="node-input-data_rate">
						<option value="5">400 Hz</option>
						<option value="6">800 Hz</option>
						<option value="7">1600 Hz</option>
						<option value="12">3200 Hz</option>
						<option value="13">6400 Hz</option>
						<option value="14">12800 Hz</option>
						<option value="15">25600 Hz</option>
					</select>
				</div>
				<div class="form-row">
					<label for="node-input-time_series"><i class="icon-tag"></i> Time Series Data (unimplemented)</label>
					<select id="node-input-time_series">
						<option value="0">Disabled</option>
						<option value="1">Enabled</option>
					</select>
				</div>
				<div class="form-row">
					<label for="node-input-reading_type"><i class="icon-tag"></i> Reading Type</label>
					<select id="node-input-reading_type">
						<option value="1">Acceleration</option>
						<option value="2">Velocity</option>
					</select>
				</div>
			</div>
			<div class="ncd-dependent" data-sensor-44>
				<hr>
				<div class="form-row">
					<p><strong>Advanced: Set Sensor Forced Calibration</strong></p>
					<p>This command will take 3 minutes to execute as the sensor calibrates. Do not reboot the sensor during this time. The configuration completed command through the UI is referring to the receipt and acknowledgement of the configuration packet.</p>
				</div>
				<div class="form-row">
					<label for="node-input-force_calibration_co2_auto_config"><i class="icon-tag"></i>  Auto Config</label>
					<input type="checkbox" id="node-input-force_calibration_co2_auto_config" class="ncd-config-toggle" data-target-id="node-input-force_calibration_co2" value="1">
				</div>
				<div class="form-row">
					<label for="node-input-force_calibration_co2"><i class="icon-tag"></i>  Value</label>
					<input type="text" id="node-input-force_calibration_co2" placeholder="455" value="455">
				</div>
			</div>

			<div class="ncd-dependent" data-sensor-84 data-sensor-519>
				<hr>
				<div class="form-row ncd-active-check">
					<strong>LED Alert Mode</strong>
					<p>Choose whether the LED indicator should be based on Acceleration or Velocity</p>
					<div>
						<label for="node-input-led_alert_mode_84_active"><i class="icon-tag"></i>Active:</label>
						<input type="checkbox" id="node-input-led_alert_mode_84_active" class="ncd-config-toggle" data-target-id="node-input-led_alert_mode_84" value="1">
					</div>
					<div>
						<label for="node-input-led_alert_mode_84"><i class="icon-tag"></i>Value:</label>
						<select id="node-input-led_alert_mode_84">
							<option value="0">Acceleration</option>
							<option value="1">Velocity</option>
						</select>
					</div>
				</div>
				<div class="form-row ncd-active-check">
					<div>
						<strong>LED Accelerometer Threshold</strong>
						<p>Set the minimum acceleration value to make LED indicator red.<br>This will be an integer value that increments the threshold by 50mg. A value of 1 means turn the LED red if acceleration is above 50mg, 2 means 100mg, etc.<br>**Only applies if LED Alert Mode is set to Acceleration.</p>
					</div>
					<div>
						<label for="node-input-led_accelerometer_threshold_84_active"><i class="icon-tag"></i>  Auto Config</label>
						<input type="checkbox" id="node-input-led_accelerometer_threshold_84_active" class="ncd-config-toggle" data-target-id="node-input-led_accelerometer_threshold_84" value="1">
					</div>
					<div>
						<label for="node-input-led_accelerometer_threshold_84"><i class="icon-tag"></i>  Value</label>
						<input type="text" id="node-input-led_accelerometer_threshold_84" placeholder="10" value="10">
					</div>
				</div>
				<div class="form-row ncd-active-check">
					<div>
						<strong>LED Velocity Threshold</strong>
						<p>Set the minimum velocity value to make LED indicator red.<br>This will be an integer value that increments the threshold by 2mm/second. A value of 1 means turn the LED red if velocity is above 2mm/sec, 2 means 4mm/second, etc.<br>**Only applies if LED Alert Mode is set to Velocity.</p>
					</div>
					<div>
						<label for="node-input-led_velocity_threshold_84_active"><i class="icon-tag"></i>  Auto Config</label>
						<input type="checkbox" id="node-input-led_velocity_threshold_84_active" class="ncd-config-toggle" data-target-id="node-input-led_velocity_threshold_84" value="1">
					</div>
					<div>
						<label for="node-input-led_velocity_threshold_84"><i class="icon-tag"></i>  Value</label>
						<input type="text" id="node-input-led_velocity_threshold_84" placeholder="10" value="10">
					</div>
				</div>
				<div class="form-row ncd-active-check">
					<div>
						<strong>Set Acceleration Wake/Interrupt Threshold</strong>
						<p>Set a breakpoint for sensor to wake up and broadcast readings. This is an interrupt based configuration ideal for devices with minimal workload/uptime.</p>
						<p>This will be an integer value that increments the interrupt threshold by 50mg. A value of 1 means turn the wake the sensor if acceleration is above 50mg, 2 means 100mg, etc.</p>
					</div>
					<div>
						<label for="node-input-acceleration_interrupt_threshold_84_active"><i class="icon-tag"></i>  Auto Config</label>
						<input type="checkbox" id="node-input-acceleration_interrupt_threshold_84_active" class="ncd-config-toggle" data-target-id="node-input-acceleration_interrupt_threshold_84" value="1">
					</div>
					<div>
						<label for="node-input-acceleration_interrupt_threshold_84"><i class="icon-tag"></i>  Value</label>
						<input type="text" id="node-input-acceleration_interrupt_threshold_84" placeholder="10" value="10">
					</div>
				</div>
			</div>

			<div class="ncd-dependent" data-sensor-80 data-sensor-81 data-sensor-82 data-sensor-84 data-sensor-519>
				<hr>
				<div class="form-row ncd-active-check">
					<strong>Mode</strong>
					<div>
						<label for="node-input-mode_80_active"><i class="icon-tag"></i>Active:</label>
						<input type="checkbox" id="node-input-mode_80_active" class="ncd-config-toggle" data-target-id="node-input-mode_80" value="1">
					</div>
					<div>
						<label for="node-input-mode_80"><i class="icon-tag"></i>Value:</label>
						<select id="node-input-mode_80">
							<option value="0">Processed</option>
							<option value="1">Raw</option>
							<option value="2">Processed + Raw on demand</option>
						</select>
					</div>
				</div>
				<div class="form-row ncd-active-check">
					<strong>Measurement Mode</strong>
					<div>
						<label for="node-input-measurement_mode_80_active">Active:</label>
						<input type="checkbox" id="node-input-measurement_mode_80_active" class="ncd-config-toggle" data-target-id="node-input-measurement_mode_80" value="1">
					</div>
					<div>
						<label for="node-input-measurement_mode_80"><i class="icon-tag"></i>Value:</label>
						<select id="node-input-measurement_mode_80">
							<option value="0">Processed data, acc in mg, velocity in mm/sec and displacement in mm</option>
							<option value="1">Processed data, acc in ms^2, velocity in inch/sec and displacement in milli</option>
						</select>
					</div>
				</div>
				<div class="form-row ncd-active-check">
					<strong>Set On Request Timeout in seconds</strong>
					<div>
						<label for="node-input-on_request_timeout_80_active">Active:</label>
						<input type="checkbox" id="node-input-on_request_timeout_80_active" class="ncd-config-toggle" data-target-id="node-input-on_request_timeout_80" value="1">
					</div>
					<div>
						<label for="node-input-on_request_timeout_80"><i class="icon-tag"></i>Value:</label>
						<input type="text" id="node-input-on_request_timeout_80" value="1">
					</div>
				</div>
			</div>

			<div class="ncd-dependent" data-sensor-80 data-sensor-82 data-sensor-84 data-sensor-101 data-sensor-102 data-sensor-519>
				<hr>
				<div class="form-row ncd-active-check">
					<strong>Set Sampling Duration 1= 50msec, 2= 100msec</strong>
					<div>
						<label for="node-input-sampling_duration_101_active">Active:</label>
						<input type="checkbox" id="node-input-sampling_duration_101_active" class="ncd-config-toggle" data-target-id="node-input-sampling_duration_101" value="1">
					</div>
					<div>
						<label for="node-input-sampling_duration_101"><i class="icon-tag"></i>Value:</label>
						<input type="text" id="node-input-sampling_duration_101">
					</div>
				</div>
			</div>

			<div class="ncd-dependent" data-sensor-80 data-sensor-81 data-sensor-82 data-sensor-84 data-sensor-101 data-sensor-102 data-sensor-519>
				<hr>
				<div class="form-row ncd-active-check">
					<strong>Sampling Interval</strong>
					<div>
						<label for="node-input-sampling_interval_101_active">Active: </label>
						<input type="checkbox" id="node-input-sampling_interval_101_active" class="ncd-config-toggle" data-target-id="node-input-sampling_interval_101" value="1">
					</div>
					<div>
						<label for="node-input-sampling_interval_101"><i class="icon-tag"></i>Value:</label>
						<select id="node-input-sampling_interval_101">
							<option value="0">5 Minutes</option>
							<option value="1">10 Minutes</option>
							<option value="2">15 Minutes</option>
							<option value="3">20 Minutes</option>
							<option value="4">30 Minutes</option>
							<option value="5">60 Minutes</option>
							<option value="6">120 Minutes</option>
							<option value="7">180 Minutes</option>
							<option value="8">1 Minutes</option>
						</select>
					</div>
				</div>
				<div class="form-row ncd-active-check">
					<strong>Set RTC</strong>
					<div>
						<label for="node-input-set_rtc_101"><i class="icon-tag"></i>Active:</label>
						<input type="checkbox" id="node-input-set_rtc_101" value="1">
					</div>
				</div>
			</div>

			<div class="ncd-dependent" data-sensor-81>
				<hr>
				<div class="form-row ncd-active-check">
					<strong>Probe 1: Output Data Rate</strong>
					<div>
						<label for="node-input-output_data_rate_p1_81_active"><i class="icon-tag"></i>Active:</label>
						<input type="checkbox" id="node-input-output_data_rate_p1_81_active" class="ncd-config-toggle" data-target-id="node-input-output_data_rate_p1_81" value="1">
					</div>
					<div>
						<label for="node-input-output_data_rate_p1_81"><i class="icon-tag"></i>Value:</label>
						<select id="node-input-output_data_rate_p1_81">
							<option value="6">50Hz</option>
							<option value="7">100Hz</option>
							<option value="8">200Hz</option>
							<option value="9">400Hz</option>
							<option value="10">800Hz</option>
							<option value="11">1600Hz</option>
							<option value="12">3200Hz</option>
							<option value="13">6400Hz</option>
							<option value="14">12800Hz</option>
							<option value="15">25600Hz</option>
						</select>
					</div>
				</div>
				<div class="form-row ncd-active-check">
					<strong>Probe 1: Sampling Duration 1= 50msec, 2= 100msec</strong>
					<div>
						<label for="node-input-sampling_duration_p1_81_active">Active:</label>
						<input type="checkbox" id="node-input-sampling_duration_p1_81_active" class="ncd-config-toggle" data-target-id="node-input-sampling_duration_p1_81" value="1">
					</div>
					<div>
						<label for="node-input-sampling_duration_p1_81"><i class="icon-tag"></i>Value:</label>
						<input type="text" id="node-input-sampling_duration_p1_81">
					</div>
				</div>
				<div class="form-row ncd-active-check">
					<strong>Probe 2: Output Data Rate</strong>
					<div>
						<label for="node-input-output_data_rate_p2_81_active"><i class="icon-tag"></i>Active:</label>
						<input type="checkbox" id="node-input-output_data_rate_p2_81_active" class="ncd-config-toggle" data-target-id="node-input-output_data_rate_p2_81" value="1">
					</div>
					<div>
						<label for="node-input-output_data_rate_p2_81"><i class="icon-tag"></i>Value:</label>
						<select id="node-input-output_data_rate_p2_81">
							<option value="6">50Hz</option>
							<option value="7">100Hz</option>
							<option value="8">200Hz</option>
							<option value="9">400Hz</option>
							<option value="10">800Hz</option>
							<option value="11">1600Hz</option>
							<option value="12">3200Hz</option>
							<option value="13">6400Hz</option>
							<option value="14">12800Hz</option>
							<option value="15">25600Hz</option>
						</select>
					</div>
				</div>
				<div class="form-row ncd-active-check">
					<strong>Probe 2: Sampling Duration 1= 50msec, 2= 100msec</strong>
					<div>
						<label for="node-input-sampling_duration_p2_81_active">Active:</label>
						<input type="checkbox" id="node-input-sampling_duration_p2_81_active" class="ncd-config-toggle" data-target-id="node-input-sampling_duration_p2_81" value="1">
					</div>
					<div>
						<label for="node-input-sampling_duration_p2_81"><i class="icon-tag"></i>Value:</label>
						<input type="text" id="node-input-sampling_duration_p2_81">
					</div>
				</div>
			</div>
			<div class="ncd-dependent" data-sensor-80 data-sensor-82 data-sensor-84 data-sensor-102 data-sensor-519>
				<hr>
				<div class="form-row ncd-active-check">
					<strong>Output Data Rate</strong>
					<div>
						<label for="node-input-output_data_rate_101_active"><i class="icon-tag"></i>Active:</label>
						<input type="checkbox" id="node-input-output_data_rate_101_active" class="ncd-config-toggle" data-target-id="node-input-output_data_rate_101" value="1">
					</div>
					<div>
						<label for="node-input-output_data_rate_101"><i class="icon-tag"></i>Value:</label>
						<select id="node-input-output_data_rate_101">
							<option value="6">50Hz</option>
							<option value="7">100Hz</option>
							<option value="8">200Hz</option>
							<option value="9">400Hz</option>
							<option value="10">800Hz</option>
							<option value="11">1600Hz</option>
							<option value="12">3200Hz</option>
							<option value="13">6400Hz</option>
							<option value="14">12800Hz</option>
							<option value="15">25600Hz</option>
						</select>
					</div>
				</div>
			</div>
			<div class="ncd-dependent" data-sensor-101>
				<hr>
				<div class="form-row ncd-active-check">
					<strong>Output Data Rate</strong>
					<div>
						<label for="node-input-output_data_rate_101_m2_active"><i class="icon-tag"></i>Active:</label>
						<input type="checkbox" id="node-input-output_data_rate_101_m2_active" class="ncd-config-toggle" data-target-id="node-input-output_data_rate_101_m2" value="1">
					</div>
					<div>
						<label for="node-input-output_data_rate_101_m2"><i class="icon-tag"></i>Value:</label>
						<select id="node-input-output_data_rate_101_m2">
							<option value="0">4000 SPS</option>
							<option value="1">2000 SPS</option>
							<option value="2">1000 SPS</option>
							<option value="3">500  SPS</option>
							<option value="4">250  SPS</option>
							<option value="5">125  SPS</option>
							<option value="6">62.5 SPS</option>
							<option value="7">31.25 SPS</option>
							<option value="8">15.625 SPS</option>
							<option value="9">7.813 SPS</option>
							<option value="10">3.906 SPS</option>
						</select>
					</div>
				</div>
			</div>
			<div class="ncd-dependent" data-sensor-80 data-sensor-81 data-sensor-82 data-sensor-84 data-sensor-519>
				<div class="form-row ncd-active-check">
					<strong>Set Filtering</strong>
					<div>
						<label for="node-input-filter_80_active">Active:</label>
						<input type="checkbox" id="node-input-filter_80_active" class="ncd-config-toggle" data-target-id="node-input-filter_80" value="1">
					</div>
					<div>
						<label for="node-input-filter_80"><i class="icon-tag"></i>Value:</label>
						<select id="node-input-filter_80">
							<option value="0">Disabled</option>
							<option value="1">Enabled</option>
						</select>
					</div>
				</div>
				<div class="form-row ncd-active-check">
					<strong>Set Low Pass Filter Probe 1</strong>
					<p>
						This setting will set the LPF freq to ODR divided by Selected Value<br>
						Example: ODR = 800 and Filter Coefficient = 4<br>
						LPF freq = 800/4 = 200Hz
					</p>
					<div>
						<label for="node-input-low_pass_filter_80_active">Active:</label>
						<input type="checkbox" id="node-input-low_pass_filter_80_active" class="ncd-config-toggle" data-target-id="node-input-low_pass_filter_80" value="1">
					</div>
					<div>
						<label for="node-input-low_pass_filter_80"><i class="icon-tag"></i>Value:</label>
						<select id="node-input-low_pass_filter_80">
							<option value="0">4</option>
							<option value="1">8</option>
							<option value="2">16</option>
							<option value="3">32</option>
							<option value="4">64</option>
							<option value="5">128</option>
							<option value="6">256</option>
							<option value="7">512</option>
							<option value="8">1024</option>
							<option value="9">2048</option>
						</select>
					</div>
				</div>
				<div class="form-row ncd-active-check">
					<strong>Set High Pass Filter Probe 1</strong>
					<p>
						This setting will set the HPF freq to ODR divided by Selected Value<br>
						Example: ODR = 800 and Filter Coefficient = 64<br>
						HPF freq = 800/64 = 12.5Hz
					</p>
					<div>
						<label for="node-input-high_pass_filter_80_active">Active:</label>
						<input type="checkbox" id="node-input-high_pass_filter_80_active" class="ncd-config-toggle" data-target-id="node-input-high_pass_filter_80" value="1">
					</div>
					<div>
						<label for="node-input-high_pass_filter_80"><i class="icon-tag"></i>Value:</label>
						<select id="node-input-high_pass_filter_80">
							<option value="0">4</option>
							<option value="1">8</option>
							<option value="2">16</option>
							<option value="3">32</option>
							<option value="4">64</option>
							<option value="5">128</option>
							<option value="6">256</option>
							<option value="7">512</option>
							<option value="8">1024</option>
							<option value="9">2048</option>
						</select>
					</div>
				</div>
			</div>
			<div class="ncd-dependent" data-sensor-81>
				<div class="form-row ncd-active-check">
					<strong>Set Low Pass Filter Probe 2</strong>
					<p>
						This setting will set the LPF freq to ODR divided by Selected Value<br>
						Example: ODR = 800 and Filter Coefficient = 4<br>
						LPF freq = 800/4 = 200Hz
					</p>
					<div>
						<label for="node-input-low_pass_filter_81_p2_active">Active:</label>
						<input type="checkbox" id="node-input-low_pass_filter_81_p2_active" class="ncd-config-toggle" data-target-id="node-input-low_pass_filter_81_p2" value="1">
					</div>
					<div>
						<label for="node-input-low_pass_filter_81_p2"><i class="icon-tag"></i>Value:</label>
						<select id="node-input-low_pass_filter_81_p2">
							<option value="0">4</option>
							<option value="1">8</option>
							<option value="2">16</option>
							<option value="3">32</option>
							<option value="4">64</option>
							<option value="5">128</option>
							<option value="6">256</option>
							<option value="7">512</option>
							<option value="8">1024</option>
							<option value="9">2048</option>
						</select>
					</div>
				</div>
				<div class="form-row ncd-active-check">
					<strong>Set High Pass Filter Probe 2</strong>
					<p>
						This setting will set the HPF freq to ODR divided by Selected Value<br>
						Example: ODR = 800 and Filter Coefficient = 64<br>
						HPF freq = 800/64 = 12.5Hz
					</p>
					<div>
						<label for="node-input-high_pass_filter_81_p2_active">Active:</label>
						<input type="checkbox" id="node-input-high_pass_filter_81_p2_active" class="ncd-config-toggle" data-target-id="node-input-high_pass_filter_81_p2" value="1">
					</div>
					<div>
						<label for="node-input-high_pass_filter_81_p2"><i class="icon-tag"></i>Value:</label>
						<select id="node-input-high_pass_filter_81_p2">
							<option value="0">4</option>
							<option value="1">8</option>
							<option value="2">16</option>
							<option value="3">32</option>
							<option value="4">64</option>
							<option value="5">128</option>
							<option value="6">256</option>
							<option value="7">512</option>
							<option value="8">1024</option>
							<option value="9">2048</option>
						</select>
					</div>
				</div>
			</div>

			<div class="ncd-dependent" data-sensor-80 data-sensor-81 data-sensor-82 data-sensor-84 data-sensor-519>
				<div class="form-row ncd-active-check">
					<strong>Full Scale Range</strong>
					<div>
						<label for="node-input-full_scale_range_101_active">Active:</label>
						<input type="checkbox" id="node-input-full_scale_range_101_active" class="ncd-config-toggle" data-target-id="node-input-full_scale_range_101" value="1">
					</div>
					<div>
						<label for="node-input-full_scale_range_101"><i class="icon-tag"></i>Value:</label>
						<select id="node-input-full_scale_range_101">
							<option value="0">+/- 2g</option>
							<option value="1">+/- 4g</option>
							<option value="2">+/- 8g</option>
							<option value="3">+/- 16g</option>
							<option value="4">+/- 32g</option>
							<option value="5">+/- 64g</option>
						</select>
					</div>
				</div>
			</div>
			<div class="ncd-dependent" data-sensor-101>
				<div class="form-row ncd-active-check">
					<strong>Full Scale Range</strong>
					<div>
						<label for="node-input-full_scale_range_101_m2_active">Active:</label>
						<input type="checkbox" id="node-input-full_scale_range_101_m2_active" class="ncd-config-toggle" data-target-id="node-input-full_scale_range_101_m2" value="1">
					</div>
					<div>
						<label for="node-input-full_scale_range_101_m2"><i class="icon-tag"></i>Value:</label>
						<select id="node-input-full_scale_range_101_m2">
							<option value="0">+/- 10g</option>
							<option value="1">+/- 20g</option>
							<option value="2">+/- 40g</option>
						</select>
					</div>
				</div>
			</div>
			<div class="ncd-dependent" data-sensor-80 data-sensor-81 data-sensor-82 data-sensor-84 data-sensor-101 data-sensor-519>
				<div class="form-row ncd-active-check">
					<strong>Set Dead Band in mg</strong>
					<div>
						<label for="node-input-deadband_80_active">Active:</label>
						<input type="checkbox" id="node-input-deadband_80_active" class="ncd-config-toggle" data-target-id="node-input-deadband_80" value="35">
					</div>
					<div>
						<label for="node-input-deadband_80"><i class="icon-tag"></i>Value:</label>
						<input type="text" id="node-input-deadband_80">
					</div>
				</div>
				<div class="form-row ncd-active-check">
					<strong>Configure Enabled Axes</strong>
					<div>
						<label for="node-input-x_axis_101"><i class="icon-tag"></i>X Axis Enabled:</label>
						<input type="checkbox" id="node-input-x_axis_101" value="1">
					</div>
					<div>
						<label for="node-input-y_axis_101"><i class="icon-tag"></i>Y Axis Enabled:</label>
						<input type="checkbox" id="node-input-y_axis_101" value="2">
					</div>
					<div>
						<label for="node-input-z_axis_101"><i class="icon-tag"></i>Z Axis Enabled:</label>
						<input type="checkbox" id="node-input-z_axis_101" value="4">
					</div>
				</div>
			</div>

			<div class="ncd-dependent" data-sensor-82>
				<div class="form-row ncd-active-check">
					<strong>Set Current Calibration Value</strong>
					<div>
						<label for="node-input-current_calibration_82_active">Active:</label>
						<input type="checkbox" id="node-input-current_calibration_82_active" class="ncd-config-toggle" data-target-id="node-input-current_calibration_82" value="1">
					</div>
					<div>
						<label for="node-input-current_calibration_82"><i class="icon-tag"></i>Value:</label>
						<input type="text" id="node-input-current_calibration_82">
					</div>
				</div>
			</div>

			<div class="ncd-dependent" data-sensor-14 data-sensor-45 data-sensor-48 data-sensor-52>
				<div class="form-row ncd-active-check">
					<strong>Sensor Boot Time</strong>
					<p class="caption">
						This value represents the number of seconds to wait after applying power to the sensor before taking a reading.
						Only recommended for sensors powered by the Wireless Sensor's power supply.
					</p>
					<div>
						<label for="node-input-sensor_boot_time_420ma_active">Active:</label>
						<input type="checkbox" id="node-input-sensor_boot_time_420ma_active" class="ncd-config-toggle" data-target-id="node-input-sensor_boot_time_420ma" value="1">
					</div>
					<div>
						<label for="node-input-sensor_boot_time_420ma"><i class="icon-tag"></i>Value:</label>
						<input type="text" id="node-input-sensor_boot_time_420ma" placeholder="0" value="0">
					</div>
				</div>
			</div>

			<div class="ncd-dependent" data-sensor-80 data-sensor-81 data-sensor-505 data-sensor-506>
				<div class="form-row ncd-active-check">
					<strong>Channel 1 Current Calibration Value</strong>
					<p class="caption">
						Default 200A Calibration: 178<br>
						Default 600A Calibration: 548
					</p>
					<div>
						<label for="node-input-current_calibration_c1_80_active">Active:</label>
						<input type="checkbox" id="node-input-current_calibration_c1_80_active" class="ncd-config-toggle" data-target-id="node-input-current_calibration_c1_80" value="1">
					</div>
					<div>
						<label for="node-input-current_calibration_c1_80"><i class="icon-tag"></i>Value:</label>
						<input type="text" id="node-input-current_calibration_c1_80" placeholder="178" value="178">
					</div>
				</div>
			</div>

			<div class="ncd-dependent" data-sensor-81 data-sensor-506>
				<div class="form-row ncd-active-check">
				<strong>Channel 2 Current Calibration Value</strong>
				<p class="caption">
					Default 200A Calibration: 178<br>
					Default 600A Calibration: 548
				</p>
				<div>
					<label for="node-input-current_calibration_c2_80_active">Active:</label>
					<input type="checkbox" id="node-input-current_calibration_c2_80_active" class="ncd-config-toggle" data-target-id="node-input-current_calibration_c2_80" value="1">
				</div>
					<div>
						<label for="node-input-current_calibration_c2_80"><i class="icon-tag"></i>Value:</label>
						<input type="text" id="node-input-current_calibration_c2_80" placeholder="178" value="178">
					</div>
				</div>
			</div>

			<div class="ncd-dependent" data-sensor-506>
				<div class="form-row ncd-active-check">
					<strong>Channel 3 Current Calibration Value</strong>
					<p class="caption">
						Default 200A Calibration: 178<br>
						Default 600A Calibration: 548
					</p>
					<div>
						<label for="node-input-current_calibration_c3_80_active">Active:</label>
						<input type="checkbox" id="node-input-current_calibration_c3_80_active" class="ncd-config-toggle" data-target-id="node-input-current_calibration_c3_80" value="1">
					</div>
					<div>
						<label for="node-input-current_calibration_c3_80"><i class="icon-tag"></i>Value:</label>
						<input type="text" id="node-input-current_calibration_c3_80" placeholder="178" value="178">
					</div>
				</div>
			</div>

			<div class="ncd-dependent" data-sensor-47>
				<div class="form-row ncd-active-check">
					<strong>Roll Angle Threshold</strong>
					<p class="caption">
						This settings forces the sensor to transmit a packet when it detects a change in Roll angle at the chosen value or a multiple of the chosen value.<br>
						A value of 20 will force the sensor to transmit a packet at a roll angle of 20 degrees, -20 degrees, 40 degrees, -40 degrees, etc.
					</p>
					<div>
						<label for="node-input-roll_angle_threshold_47_active">Active:</label>
						<input type="checkbox" id="node-input-roll_angle_threshold_47_active" class="ncd-config-toggle" data-target-id="node-input-roll_angle_threshold_47" value="1">
					</div>
					<div>
						<label for="node-input-roll_angle_threshold_47"><i class="icon-tag"></i>Value:</label>
						<input type="text" id="node-input-roll_angle_threshold_47" placeholder="10" value="10">
					</div>
				</div>
				<div class="form-row ncd-active-check">
					<strong>Pitch Angle Threshold</strong>
					<p class="caption">
						This settings forces the sensor to transmit a packet when it detects a change in Pitch angle at the chosen value or a multiple of the chosen value.<br>
						A value of 20 will force the sensor to transmit a packet at a pitch angle of 20 degrees, -20 degrees, 40 degrees, -40 degrees, etc.
					</p>
					<div>
						<label for="node-input-pitch_angle_threshold_47_active">Active:</label>
						<input type="checkbox" id="node-input-pitch_angle_threshold_47_active" class="ncd-config-toggle" data-target-id="node-input-pitch_angle_threshold_47" value="1">
					</div>
					<div>
						<label for="node-input-pitch_angle_threshold_47"><i class="icon-tag"></i>Value:</label>
						<input type="text" id="node-input-pitch_angle_threshold_47" placeholder="10" value="10">
					</div>
				</div>
			</div>
			<div class="ncd-dependent" data-sensor-35 data-sensor-36>
				<hr>
				<div class="form-row ncd-active-check">
					<strong>Counter Threshold</strong>
					<div>
						<label for="node-input-counter_threshold_35_active">Active:</label>
						<input type="checkbox" id="node-input-counter_threshold_35_active" class="ncd-config-toggle" data-target-id="node-input-counter_threshold_35" value="1">
					</div>
					<div>
						<label for="node-input-counter_threshold_35"><i class="icon-tag"></i>Value:</label>
						<input type="text" id="node-input-counter_threshold_35" placeholder="50" value="50">
					</div>
				</div>
			</div>
			<div class="ncd-dependent" data-sensor-80 data-sensor-81 data-sensor-82 data-sensor-84 data-sensor-519>
				<hr>
				<div class="form-row ncd-active-check">
					<strong>Payload Length</strong>
					<div>
						<label for="node-input-payload_length_80_active">Active:</label>
						<input type="checkbox" id="node-input-payload_length_80_active" class="ncd-config-toggle" data-target-id="node-input-payload_length_80" value="1">
					</div>
					<div>
						<label for="node-input-payload_length_80"><i class="icon-tag"></i>Value:</label>
						<select id="node-input-payload_length_80">
							<option value="0">55 Bytes</option>
							<option value="1">100 Bytes</option>
							<option value="2">150 Bytes</option>
							<option selected="selected" value="3">180 Bytes</option>
						</select>
					</div>
				</div>
			</div>
			<div class="ncd-dependent" data-sensor-10000 data-sensor-10012>
				<div class="form-row">
					<button id="config_sensor">Configure Now</button>
					<div id="config_response"></div>
				</div>
			</div>
		</div>
	</div>
</script>

<script type="text/x-red" data-help-name="ncd-wireless-node">
    <h3>Wireless Node</h3>
	<p>This node is used to filter sensor data coming from a modem. It can filter by mac address, or sensor type, and can be used to configure wireless devices automatically when they enter configuration mode.</p>
	<h4>Serial Devices</h4>
	<p>The Serial Device field refers to the modem that will be recieving the packets from the device. The Serial Device for Config field refers to a modem that is always set to the config network ID (0x7BCD), this is the recommended setup as it allows you to configure nodes without missing potentially important sensor data, however, the config button on the Wireless Gateway node may be used if a single modem will be acting as both the listener, and config endpoints, making the second selection optional.</p>
	<h4>Mac Address</h4>
	<p>The mac address of the device you wish to listen for, if you have already deployed a flow using the connected serial device, you may use the magnifying glass icon to pull a list of mac addresses that have already checked in, otherwise you can enter the mac address manually. </b>Optional</b></p>
	<h4>Sensor Type</h4>
	<p>If you wish to capture all data from sensors that match a particular type, you can use this instead of the mac address. </b>Optional</b></p>
	<h4>Advanced/Auto config</h4>
	<p>If the Auto Config checkbox is active, the settings below it will propogate to the sensor when the modem detects that it has entered configuration mode. You can find more information about these settings on the appropriate product manual, and information about deploying these settings in <a href="https://ncd.io/configuring-the-wireless-enterprise-line-with-node-red/" target="_blank">this tutorial</a></p>
	<h4>Output</h4>
	<p>This node will output detailed information about incoming sensor data, and the device identity and status including. The payload will contain an object containing sensor data, an example can be seen below:</p>
	<pre>
  msg = {
    topic: "sensor_data",
	payload: {
      humidity: 45.51,
      temperature: 23.91,
	}
    data: {
      nodeId: 0,
      firmware: 3,
      battery: 3.2940600000000004,
      counter: 37,
      sensor_type: 1,
      sensor_data: {
        humidity: 45.51,
        temperature: 23.91,
      },
      type: "sensor_data",
      addr: "00:13:a2:00:41:07:18:81",
      original: {
        mac: "00:13:a2:00:41:07:18:81",
        receive_options: {
          ack: 0,
          broadcast: 0,
          type: ""
        }
      },
      data: [127,0,3,3,255,37,0,1,0,17,199,9,87],
      type: "receive_packet"
    },
    _msgid: "391caba.5a19454"
  }
	</pre>
</script>

<script type="text/javascript">
	NCD_validators = {
		number_range: function(l, h, base){
			if(!base) base = 10;
			return function(v){
				var int = parseInt(v, 16);
				return int >= l && int <= h;
			}
		}
	}
	RED.nodes.registerType('ncd-gateway-config', {
		category: 'config',
		defaults: {
			name: {value: ""},
			comm_type: {value: "serial"},
			ip_address: {value: ""},
			tcp_port: {value: 2101, validate:RED.validators.number()},
			port: {value: ""},
			baudRate: {value: 115200, validate:RED.validators.number()},
			pan_id: {value: '7FFF', validate: NCD_validators.number_range(0, 0x7FFF, 16)},
			rssi: {value: ""}
		},
		label: function(){
			if(this.name) return this.name;
			return this.port+' ('+this.baudRate+')';
		},
		oneditprepare: function() {
			if(typeof NCD_GatewayConfig == 'undefined'){
				NCD_GatewayConfig = {};
			}
			NCD_GatewayConfig[this.id] = this;
			$('#node-config-input-comm_type').change(function(){
				switch($(this).val()){
					case 'tcp':
						$('.tcp-options').show();
						$('.serial-options').hide();
						break;
					case 'serial':
						$('.serial-options').show();
						$('.tcp-options').hide();
						break;
				}
				$('.serial-op')
			}).find('[value='+this.comm_type+']').prop('selected', true);
			//$('#node-input-comm_type').change();
			var blist = [
				{value:"115200",label:"115200",hasValue:false},
				{value:"57600",label:"57600",hasValue:false},
				{value:"38400",label:"38400",hasValue:false},
				{value:"19200",label:"19200",hasValue:false},
				{value:"9600",label:"9600",hasValue:false},
				{value:"4800",label:"4800",hasValue:false},
				{value:"2400",label:"2400",hasValue:false},
				{value:"1200",label:"1200",hasValue:false},
				{value:"600",label:"600",hasValue:false},
				{value:"300",label:"300",hasValue:false}
			];

			$("#node-config-input-baudRate").typedInput({
				default: this.baudRate,
				types:blist
			});

			try {
				$("#node-config-input-port").autocomplete( "destroy" );
			} catch(err) {}

			$("#node-lookup-modems").click(function() {
				$("#node-lookup-modems").addClass('disabled');
				$.getJSON('ncd/wireless/modems/list',function(data) {
					$("#node-lookup-modems").removeClass('disabled');
					var ports = [];
					$.each(data, function(i, port) {
						ports.push(port);
					});
					$("#node-config-input-port").autocomplete({
						source:ports,
						minLength:0,
						close: function( event, ui ) {
							$("#node-input-port").autocomplete( "destroy" );
						}
					}).autocomplete("search","");
				});
			});

			$('#node-config-input-port').on('autocompleteselect', function(e, ui){
				var mytype = $("#node-config-input-baudRate").typedInput('type');
				$("#node-config-input-baudRate").typedInput('value',mytype);
				var baudRate = $("#node-config-input-baudRate").typedInput('value');
				var port = ui.item.value;
				$.ajax({
					url: "ncd/wireless/modem/info/"+encodeURIComponent(port)+'/'+baudRate,
					type: "GET",
					success: function(resp) {
						if(resp && typeof resp.pan_id != 'undefined'){
							$('#node-config-input-pan_id').val(resp.pan_id);
						}
					},
				});
			});
		},
		oneditsave: function() {
			var mytype = $("#node-config-input-baudRate").typedInput('type');
			$("#node-config-input-baudRate").typedInput('value',mytype);
			this.serialbaud = $("#node-config-input-baudRate").typedInput('value');
		}
	});
</script>
<script type="text/x-red" data-template-name="ncd-gateway-config">
	<div class="form-row">
		<label for="node-config-input-name"><i class="icon-tag"></i> Name</label>
		<input type="text" id="node-config-input-name" placeholder="Name">
	</div>
	<div class="form-row">
		<label for="node-config-input-comm_type"><i class="icon-tag"></i> Modem Type</label>
		<select id="node-config-input-comm_type">
			<option value="serial">USB (Serial)</option>
			<option value="tcp">TCP (Ethernet/Network)</option>
		</select>
	</div>
	<div class="tcp-options">
		<div class="form-row">
			<label for="node-config-input-tcp_port"><i class="fa fa-random"></i> TCP Port</label>
			<input type="text" id="node-config-input-tcp_port" style="width:60%;" >
		</div>
		<div class="form-row">
			<label for="node-config-input-ip_address"><i class="fa fa-random"></i> IP Address</label>
			<input type="text" id="node-config-input-ip_address" style="width:60%;" >
		</div>
	</div>
	<div class="serial-options">
		<div class="form-row">
			<label for="node-config-input-port"><i class="fa fa-random"></i> Serial Port</label>
			<input type="text" id="node-config-input-port" style="width:60%;" >
			<a id="node-lookup-modems" class="btn"><i id="node-lookup-modems-icon" class="fa fa-search"></i></a>
		</div>
		<div class="form-row">
			<label for="node-config-input-baudRate"><i class="icon-tag"></i> Baud Rate</label>
			<input type="text" id="node-config-input-baudRate">
		</div>
	</div>
	<div class="form-row">
		<label for="node-config-input-pan_id"><i class="icon-tag"></i> Network ID (0 - 0x7FFF)</label>
		0x<input type="text" id="node-config-input-pan_id" value="7FFF">
	</div>
	<div class="form-row">
		<label for="node-config-input-rssi"><i class="icon-tag"></i> Add RSSI to incoming packets</label>
		<input type="checkbox" id="node-config-input-rssi" value="1">
	</div>
</script>
